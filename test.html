<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Motor Agenda</title>
</head>
<body>

<h2>Generar Próximos 21 Días</h2>

<button onclick="generar()">Generar</button>

<pre id="resultado"></pre>

<script>
const API_URL = "https://script.google.com/macros/s/AKfycbye6IIQJwokLvNTuhr49o9xxMmwc1PbQvwLrKYqe6MJ7p0YR5pNZdWJnU4GmeLab4TLug/exec";

async function generar() {

  // 1️⃣ Obtener horarios desde la API
  const horariosRes = await fetch(API_URL, {
    method: "POST",
    body: JSON.stringify({ action: "obtenerHorarios" })
  });

  const horariosData = await horariosRes.json();
  const horarios = horariosData.horarios;

  // 2️⃣ Generar próximos 21 días
  const hoy = new Date();
  let dias = [];

  for (let i = 0; i < 21; i++) {
    const fecha = new Date();
    fecha.setDate(hoy.getDate() + i);

    const nombreDia = fecha.toLocaleDateString("es-AR", { weekday: "long" });
    
    dias.push({
      fecha: fecha.toISOString().split("T")[0],
      diaSemana: capitalizar(nombreDia)
    });
  }

  // 3️⃣ Mostrar resultado
  document.getElementById("resultado").innerText =
    JSON.stringify({ dias, horarios }, null, 2);
}

function capitalizar(texto) {
  return texto.charAt(0).toUpperCase() + texto.slice(1);
}
</script>

</body>
</html>
