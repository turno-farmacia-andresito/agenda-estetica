<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Agenda Online</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 40px;
      background: #f5f5f5;
    }

    h1 {
      margin-bottom: 20px;
    }

    .section {
      margin-top: 30px;
      padding-bottom: 20px;
      border-bottom: 1px solid #ccc;
    }

    .btn-servicio {
      padding: 8px 14px;
      margin-right: 8px;
      border: 1px solid #999;
      background: #e0e0e0;
      cursor: pointer;
    }

    .btn-servicio.activo {
      background: #72bd99;
      color: white;
      border: none;
    }

    .btn-hora {
      padding: 6px 10px;
      margin: 5px 5px 5px 0;
      border: 1px solid #888;
      background: #eaeaea;
      cursor: pointer;
    }

    .dia {
      margin-top: 20px;
      font-weight: bold;
    }
  </style>
</head>
<body>

<h1>Agenda Online</h1>

<div class="section">
  <h3>1️⃣ Elegí el servicio</h3>
  <button class="btn-servicio activo">Facial</button>
  <button class="btn-servicio">Limpieza</button>
  <button class="btn-servicio">Corporal</button>
</div>

<div class="section">
  <h3>2️⃣ Elegí horario disponible</h3>
  <button onclick="cargarHorarios()">Ver Horarios Disponibles</button>
  <div id="agenda"></div>
</div>

<script>

const URL_SCRIPT = "https://script.google.com/macros/s/AKfycby-Qok2wEFDNepkx_5NUhclkBK2t2UwRlApSK1ByaDnluGyeCStghmSu4y9G-Bsukwb/exec";

function cargarHorarios() {

  fetch(URL_SCRIPT + "?action=generarAgenda")
    .then(response => response.json())
    .then(data => {

      const contenedor = document.getElementById("agenda");
      contenedor.innerHTML = "";

      data.forEach(dia => {

        const divDia = document.createElement("div");
        divDia.className = "dia";
        divDia.innerText = `${dia.fecha} - ${dia.bloquesDisponibles.length} turnos`;

        contenedor.appendChild(divDia);

        dia.bloquesDisponibles.forEach(bloque => {

          const btn = document.createElement("button");
          btn.className = "btn-hora";
          btn.innerText = bloque.hora;

          contenedor.appendChild(btn);

        });

      });

    })
    .catch(error => {
      console.error("Error:", error);
      alert("Error al cargar horarios");
    });

}

</script>

</body>
</html>
